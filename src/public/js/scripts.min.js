let resizeTimer;const navigation=document.querySelector(".navigation"),hamburger=document.querySelector("#hamburger");hamburger.addEventListener("click",(function(){navigation.classList.contains("hide")&&navigation.classList.remove("hide"),navigation.classList.contains("slide-out")?(navigation.classList.remove("slide-out"),navigation.classList.add("slide-in")):navigation.classList.contains("slide-in")?(navigation.classList.remove("slide-in"),navigation.classList.add("slide-out")):navigation.classList.add("slide-in"),hamburger.classList.toggle("close")})),navigation.addEventListener("click",(function(){navigation.classList.contains("slide-in")&&(navigation.classList.remove("slide-in"),navigation.classList.add("slide-out"),hamburger.classList.toggle("close"))})),window.addEventListener("resize",(function(){clearTimeout(resizeTimer),navigation.classList.add("no-transition"),resizeTimer=setTimeout((()=>{navigation.classList.remove("no-transition")}),10),window.innerWidth>960?navigation.classList.remove("hide","slide-in","slide-out"):(navigation.classList.remove("slide-in","slide-out"),navigation.classList.add("hide"),hamburger.classList.remove("close"))}));const getYear=()=>(new Date).getFullYear().toString();function adjustSvgStroke(){const e=document.querySelector("#footer-wave svg");if(e){let t=1;const n=e.getBoundingClientRect().width/960;e.style["stroke-width"]=t/n+"px"}}document.getElementById("year").innerHTML=getYear(),window.addEventListener("resize",adjustSvgStroke),adjustSvgStroke();const $circle=document.querySelector(".cursor-circle");let delay=15,endX=window.innerWidth/2,endY=window.innerHeight/2,_x=endX,_y=endY,cursorVisible=!1,cursorEnlarged=!1,isOverInteractiveElement=!1,animationFrameId=null;function mouseMoveHandler(e){cursorVisible=!0,isOverInteractiveElement||toggleCursorVisibility(),endX=e.clientX,endY=e.clientY,void 0===_x&&void 0===_y&&(_x=endX,_y=endY)}function mouseEnterDocumentHandler(e){cursorVisible=!0;const t=e.target;t instanceof Element&&t.matches("button, input, textarea")?($circle.style.opacity="0",isOverInteractiveElement=!0):(toggleCursorVisibility(),isOverInteractiveElement=!1)}function mouseLeaveDocumentHandler(){cursorVisible=!1,toggleCursorVisibility(),isOverInteractiveElement=!1}function handleLinkMouseEnter(){cursorEnlarged=!0,toggleCursorSize()}function handleLinkMouseLeave(){cursorEnlarged=!1,toggleCursorSize()}function handleInteractiveElementMouseEnter(){$circle.style.opacity="0",isOverInteractiveElement=!0}function handleInteractiveElementMouseLeave(){$circle.style.opacity=cursorVisible?"1":"0",isOverInteractiveElement=!1}function animate(){_x+=(endX-_x)/delay,_y+=(endY-_y)/delay,$circle&&($circle.style.top=`${_y}px`,$circle.style.left=`${_x}px`),animationFrameId=requestAnimationFrame(animate)}function toggleCursorSize(){$circle&&($circle.style.transform=cursorEnlarged?"translate(-50%, -50%) scale(1.5)":"translate(-50%, -50%) scale(1)")}function toggleCursorVisibility(){$circle&&($circle.style.opacity=cursorVisible?"1":"0")}function initializeCursor(){animationFrameId&&(cancelAnimationFrame(animationFrameId),animationFrameId=null),void 0!==_x&&void 0!==_y||(endX=window.innerWidth/2,endY=window.innerHeight/2,_x=endX,_y=endY),document.removeEventListener("mousemove",mouseMoveHandler),document.addEventListener("mousemove",mouseMoveHandler),document.removeEventListener("mouseenter",mouseEnterDocumentHandler),document.addEventListener("mouseenter",mouseEnterDocumentHandler),document.removeEventListener("mouseleave",mouseLeaveDocumentHandler),document.addEventListener("mouseleave",mouseLeaveDocumentHandler);document.querySelectorAll("button, input, textarea, .menu, .hero-container, .wave").forEach((e=>{e.removeEventListener("mouseenter",handleInteractiveElementMouseEnter),e.removeEventListener("mouseleave",handleInteractiveElementMouseLeave),e.addEventListener("mouseenter",handleInteractiveElementMouseEnter),e.addEventListener("mouseleave",handleInteractiveElementMouseLeave)}));document.querySelectorAll("a").forEach((e=>{e.removeEventListener("mouseenter",handleLinkMouseEnter),e.removeEventListener("mouseleave",handleLinkMouseLeave),e.addEventListener("mouseenter",handleLinkMouseEnter),e.addEventListener("mouseleave",handleLinkMouseLeave)})),animate()}initializeCursor();let testimonials=[],dots=[];const INTERVAL_PERIOD=5e3;let current=0,interval=null;function showTestimonial(e){testimonials.forEach((e=>e.classList.remove("active"))),dots.forEach((e=>e.classList.remove("active"))),testimonials[e].classList.add("active"),dots[e].classList.add("active"),current=e}function nextTestimonial(){current=(current+1)%testimonials.length,showTestimonial(current)}function startAutoSlide(){interval=setInterval(nextTestimonial,5e3)}function resetAutoSlide(){interval&&clearInterval(interval),startAutoSlide()}function refreshTestimonials(){testimonials=document.querySelectorAll(".testimonial"),dots=document.querySelectorAll(".testimonial-dot"),dots.forEach((e=>{e.addEventListener("click",(e=>{showTestimonial(parseInt(e.target.dataset.index)),resetAutoSlide()}))})),current=0,testimonials.length>0&&dots.length>0&&showTestimonial(current),clearInterval(interval)}function initializeCanvas(){const e=document.getElementById("bg-canvas");if(!e)return void console.warn('Canvas with id="bg-canvas" not found.');const t=e.getContext("2d");let n=[];const i=.9,a=.9;function o(){e.width=e.offsetWidth,e.height=e.offsetHeight,t.setTransform(1,0,0,1,0,0)}function r(){n=[];const t=e.width*i,o=e.height*a,r=(e.width-t)/2,s=(e.height-o)/2;["#FFF590","#B3FFD9","#FFB3B3","#E0B3FF","#AEEBFF"].forEach((e=>{for(let i=0;i<3;i++){const i=15*Math.random()+5;n.push({x:Math.random()*(t-4*i)+r+2*i,y:Math.random()*(o-4*i)+s+2*i,radius:i,color:e,dx:.28*(Math.random()-.5),dy:.28*(Math.random()-.5),offsetX:r,offsetY:s,availableWidth:t,availableHeight:o})}})),n=function(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}(n)}window.addEventListener("resize",(()=>{o(),r()})),o(),r(),function i(){e&&t&&(t.clearRect(0,0,e.width,e.height),n.forEach((e=>{t.beginPath(),t.arc(e.x,e.y,e.radius,0,2*Math.PI),t.fillStyle=e.color,t.fill(),e.x+=e.dx,e.y+=e.dy,(e.x+e.radius>=e.offsetX+e.availableWidth||e.x-e.radius<=e.offsetX)&&(e.dx*=-1),(e.y+e.radius>=e.offsetY+e.availableHeight||e.y-e.radius<=e.offsetY)&&(e.dy*=-1)})),requestAnimationFrame(i))}()}function rebindInteractiveElementHoverListeners(e=document){e.querySelectorAll("button, input, textarea, .menu, .hero-container, .wave").forEach((e=>{e.removeEventListener("mouseenter",handleInteractiveElementMouseEnter),e.removeEventListener("mouseleave",handleInteractiveElementMouseLeave),e.addEventListener("mouseenter",handleInteractiveElementMouseEnter),e.addEventListener("mouseleave",handleInteractiveElementMouseLeave)}));e.querySelectorAll("a").forEach((e=>{e.removeEventListener("mouseenter",handleLinkMouseEnter),e.removeEventListener("mouseleave",handleLinkMouseLeave),e.addEventListener("mouseenter",handleLinkMouseEnter),e.addEventListener("mouseleave",handleLinkMouseLeave)}))}function rehydratePage(e=document){const t=e.querySelectorAll(".testimonial"),n=e.querySelectorAll(".testimonial-dot");t.length>0&&n.length>0&&(refreshTestimonials(),showTestimonial(0),startAutoSlide());e.querySelector("#bg-canvas")&&initializeCanvas(),initializeCursor(),rebindInteractiveElementHoverListeners(e)}document.addEventListener("DOMContentLoaded",(()=>{rehydratePage()})),document.addEventListener("htmx:load",(e=>{const t=e.target;t&&rehydratePage(t)})),document.body.addEventListener("htmx:beforeSwap",(e=>{if(!document.startViewTransition||"MAIN"!==e.detail.target.tagName)return;const t=e.detail.xhr.responseText,n=e.detail.requestConfig.triggeringEvent?.target,i=n?.getAttribute("hx-push-url");e.preventDefault(),document.startViewTransition((()=>{e.detail.target.innerHTML=t,htmx.process(e.detail.target),rehydratePage(e.detail.target);const n=new CustomEvent("htmx:afterSwap",{detail:{target:e.detail.target,xhr:e.detail.xhr,requestConfig:e.detail.requestConfig},bubbles:!0});e.detail.target.dispatchEvent(n),requestAnimationFrame((()=>{i&&history.pushState({},"",i)}))}))})),document.body.addEventListener("htmx:afterSwap",(e=>{if("MAIN"===e.detail.target.tagName){window.scrollTo({top:0,behavior:"smooth"});const t=e.detail.requestConfig?.triggeringEvent?.target,n=t?.getAttribute("hx-push-url"),i=n||e.detail.xhr?.responseURL||location.href,a=new URL(i,location.origin).pathname.split("/"),o=a[1],r=(a[a.length-1]||"").replace("content_",""),s={"fr-ca":{"a-propos":"about",approche:"approach",contact:"contact","contact-merci":"contact_thanks",politique:"policy",ateliers:"workshops","":"index"},"en-ca":{about:"about",approach:"approach",contact:"contact","contact-thanks":"contact_thanks",policy:"policy",workshops:"workshops","":"index"}},l=s[o]?.[r]||"index";fetch(`/${o}/meta_${l}`).then((e=>e.text())).then((e=>{const t=(new DOMParser).parseFromString(`<head>${e}</head>`,"text/html"),n=t.querySelector("title");n&&(document.title=n.textContent);const i=t.querySelector('meta[name="description"]');if(i){let e=document.querySelector('meta[name="description"]');e||(e=document.createElement("meta"),e.setAttribute("name","description"),document.head.appendChild(e)),e.setAttribute("content",i.getAttribute("content"))}const a=t.querySelector('link[rel="canonical"]');if(a){let e=document.querySelector('link[rel="canonical"]');e||(e=document.createElement("link"),e.setAttribute("rel","canonical"),document.head.appendChild(e)),e.setAttribute("href",a.getAttribute("href"))}})).catch(console.warn)}})),window.addEventListener("popstate",(function(){const e=location.pathname;let t;if(/^\/(fr-ca|en-ca)(\/)?$/.test(e)){t=`/${e.split("/")[1]}/content_index`}else t=e.replace(/\/(fr-ca|en-ca)\/([^\/]+)$/,"/$1/content_$2");htmx.ajax("GET",t,{target:"main",swap:"innerHTML"})}));